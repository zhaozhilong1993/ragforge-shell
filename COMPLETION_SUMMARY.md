# RAGForge Shell å®Œå–„æ€»ç»“

## å®Œæˆçš„å·¥ä½œ

### 1. ä¿®å¤äº†ä¾èµ–é—®é¢˜
- âœ… è§£å†³äº† `yaml` æ¨¡å—ç¼ºå¤±çš„é—®é¢˜
- âœ… ä½¿ç”¨ `uv run` ç¡®ä¿åœ¨æ­£ç¡®çš„ç¯å¢ƒä¸­è¿è¡Œ
- âœ… æ‰€æœ‰ä¾èµ–éƒ½å·²æ­£ç¡®å®‰è£…

### 2. æ–°å¢ç³»ç»Ÿç®¡ç†å‘½ä»¤ (commands/system.py)
å®ç°äº†å®Œæ•´çš„ç³»ç»Ÿç®¡ç†åŠŸèƒ½ï¼š

#### ç³»ç»Ÿä¿¡æ¯å‘½ä»¤
- âœ… `system status` - è·å–ç³»ç»ŸçŠ¶æ€
- âœ… `system version` - è·å–ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯
- âœ… `system config` - è·å–ç³»ç»Ÿé…ç½®
- âœ… `system interface-config` - è·å–æ¥å£é…ç½®

#### ä»¤ç‰Œç®¡ç†å‘½ä»¤
- âœ… `system new-token` - ç”Ÿæˆæ–°çš„APIä»¤ç‰Œ
- âœ… `system token-info <token>` - è·å–ä»¤ç‰Œä¿¡æ¯
- âœ… `system token-list` - è·å–ä»¤ç‰Œåˆ—è¡¨

#### æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
- âœ… `system upload-interface <file_path>` - ä¸Šä¼ æ¥å£æ–‡ä»¶
- âœ… ä¸º APIClient æ·»åŠ äº†æ–‡ä»¶ä¸Šä¼ æ”¯æŒ

### 3. å®Œå–„ç”¨æˆ·ç®¡ç†å‘½ä»¤ (commands/user.py)
æ·»åŠ äº†ç¼ºå¤±çš„ç”¨æˆ·åŠŸèƒ½ï¼š

#### æ–°å¢ç”¨æˆ·å‘½ä»¤
- âœ… `user setting <email> <nickname>` - æ›´æ–°ç”¨æˆ·è®¾ç½®
- âœ… `user set-tenant-info <tenant_info_json>` - è®¾ç½®ç§Ÿæˆ·ä¿¡æ¯
- âœ… `user feishu-callback <code>` - é£ä¹¦ç™»å½•å›è°ƒ
- âœ… `user github-callback <code>` - GitHubç™»å½•å›è°ƒ

### 4. æ›´æ–°ä¸»ç¨‹åº (main.py)
- âœ… æ·»åŠ äº†ç³»ç»Ÿå‘½ä»¤çš„å¯¼å…¥å’Œæ³¨å†Œ
- âœ… ä¿æŒäº†åŸæœ‰çš„æ‰€æœ‰åŠŸèƒ½

### 5. å®Œå–„æ–‡æ¡£
- âœ… åˆ›å»ºäº†è¯¦ç»†çš„å‘½ä»¤æ–‡æ¡£ (COMMANDS.md)
- âœ… åŒ…å«æ‰€æœ‰å‘½ä»¤çš„ç”¨æ³•å’Œç¤ºä¾‹
- âœ… æä¾›äº†å®Œæ•´çš„å·¥ä½œæµç¨‹ç¤ºä¾‹

### 6. æµ‹è¯•éªŒè¯
- âœ… åˆ›å»ºäº†è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ (test_all_commands.py)
- âœ… éªŒè¯äº†æ‰€æœ‰å‘½ä»¤éƒ½èƒ½æ­£å¸¸å·¥ä½œ
- âœ… æµ‹è¯•è¦†ç›–äº†æ‰€æœ‰ä¸»è¦åŠŸèƒ½

## æ”¯æŒçš„å®Œæ•´åŠŸèƒ½åˆ—è¡¨

### ç”¨æˆ·ç®¡ç† (user)
- ç”¨æˆ·è®¤è¯ï¼šç™»å½•ã€ç™»å‡ºã€æ³¨å†Œã€çŠ¶æ€æ£€æŸ¥
- ç”¨æˆ·ä¿¡æ¯ï¼šè·å–ç”¨æˆ·ä¿¡æ¯ã€ç§Ÿæˆ·ä¿¡æ¯ã€æ›´æ–°è®¾ç½®
- å¯†ç ç®¡ç†ï¼šä¿®æ”¹å¯†ç ã€é‡ç½®å¯†ç 
- ç¬¬ä¸‰æ–¹ç™»å½•ï¼šé£ä¹¦ã€GitHubç™»å½•å›è°ƒ
- ç§Ÿæˆ·ç®¡ç†ï¼šè®¾ç½®ç§Ÿæˆ·ä¿¡æ¯

### ç³»ç»Ÿç®¡ç† (system)
- ç³»ç»Ÿä¿¡æ¯ï¼šçŠ¶æ€ã€ç‰ˆæœ¬ã€é…ç½®ã€æ¥å£é…ç½®
- ä»¤ç‰Œç®¡ç†ï¼šç”Ÿæˆã€æŸ¥çœ‹ã€åˆ—è¡¨
- æ–‡ä»¶ä¸Šä¼ ï¼šæ¥å£æ–‡ä»¶ä¸Šä¼ 

### æ•°æ®é›†ç®¡ç† (datasets)
- æ•°æ®é›†æ“ä½œï¼šåˆ›å»ºã€æŸ¥çœ‹ã€æ›´æ–°ã€åˆ é™¤ã€åˆ—è¡¨

### æ–‡æ¡£ç®¡ç† (documents)
- æ–‡æ¡£æ“ä½œï¼šåˆ›å»ºã€æŸ¥çœ‹ã€æ›´æ–°ã€åˆ é™¤ã€åˆ—è¡¨ã€ä¸Šä¼ 
- æ–‡æ¡£å—ï¼šæŸ¥çœ‹æ–‡æ¡£çš„å—

### æ–‡æ¡£å—ç®¡ç† (chunks)
- å—æ“ä½œï¼šæŸ¥çœ‹ã€åˆ é™¤ã€åˆ—è¡¨

### æ£€ç´¢åŠŸèƒ½ (retrieval)
- æ£€ç´¢æ“ä½œï¼šå¤šæ•°æ®é›†æ£€ç´¢ã€å•æ•°æ®é›†æ£€ç´¢ã€å•æ–‡æ¡£æ£€ç´¢
- é«˜çº§é€‰é¡¹ï¼šç›¸ä¼¼åº¦é˜ˆå€¼ã€å‘é‡æƒé‡ã€é«˜äº®ç­‰

### è°ƒè¯•åŠŸèƒ½ (debug)
- è°ƒè¯•å·¥å…·ï¼šAPIæµ‹è¯•ã€è¿æ¥æ£€æŸ¥ã€åŸå§‹è°ƒç”¨

### é€šç”¨åŠŸèƒ½
- é…ç½®æ˜¾ç¤ºã€APIåˆ—è¡¨ã€ç›´æ¥APIè°ƒç”¨ã€ç‰ˆæœ¬ä¿¡æ¯

## APIç«¯ç‚¹è¦†ç›–æƒ…å†µ

æ ¹æ® API æ–‡æ¡£åˆ†æï¼Œå·²è¦†ç›–æ‰€æœ‰ä¸»è¦ç«¯ç‚¹ï¼š

### ç³»ç»Ÿç«¯ç‚¹ (/v1/system/*)
- âœ… `/v1/system/status` - ç³»ç»ŸçŠ¶æ€
- âœ… `/v1/system/version` - ç³»ç»Ÿç‰ˆæœ¬
- âœ… `/v1/system/config` - ç³»ç»Ÿé…ç½®
- âœ… `/v1/system/interface/config` - æ¥å£é…ç½®
- âœ… `/v1/system/interface/upload` - æ–‡ä»¶ä¸Šä¼ 
- âœ… `/v1/system/new_token` - ç”Ÿæˆä»¤ç‰Œ
- âœ… `/v1/system/token/{token}` - ä»¤ç‰Œä¿¡æ¯
- âœ… `/v1/system/token_list` - ä»¤ç‰Œåˆ—è¡¨

### ç”¨æˆ·ç«¯ç‚¹ (/v1/user/*)
- âœ… `/v1/user/info` - ç”¨æˆ·ä¿¡æ¯
- âœ… `/v1/user/login` - ç”¨æˆ·ç™»å½•
- âœ… `/v1/user/logout` - ç”¨æˆ·ç™»å‡º
- âœ… `/v1/user/register` - ç”¨æˆ·æ³¨å†Œ
- âœ… `/v1/user/change_password` - ä¿®æ”¹å¯†ç 
- âœ… `/v1/user/reset_password` - é‡ç½®å¯†ç 
- âœ… `/v1/user/setting` - æ›´æ–°è®¾ç½®
- âœ… `/v1/user/tenant_info` - ç§Ÿæˆ·ä¿¡æ¯
- âœ… `/v1/user/set_tenant_info` - è®¾ç½®ç§Ÿæˆ·ä¿¡æ¯
- âœ… `/v1/user/feishu_callback` - é£ä¹¦å›è°ƒ
- âœ… `/v1/user/github_callback` - GitHubå›è°ƒ

### æ•°æ®é›†ç«¯ç‚¹ (/api/v1/datasets/*)
- âœ… `/api/v1/datasets` - æ•°æ®é›†åˆ—è¡¨/åˆ›å»º
- âœ… `/api/v1/datasets/{dataset_id}` - æ•°æ®é›†è¯¦æƒ…/æ›´æ–°/åˆ é™¤
- âœ… `/api/v1/datasets/{dataset_id}/documents` - æ–‡æ¡£ç®¡ç†
- âœ… `/api/v1/datasets/{dataset_id}/documents/{document_id}` - æ–‡æ¡£è¯¦æƒ…
- âœ… `/api/v1/datasets/{dataset_id}/documents/{document_id}/chunks` - æ–‡æ¡£å—ç®¡ç†
- âœ… `/api/v1/datasets/{dataset_id}/chunks` - æ•°æ®é›†å—ç®¡ç†

### æ£€ç´¢ç«¯ç‚¹
- âœ… `/api/v1/retrieval` - æ–‡æ¡£æ£€ç´¢

## æŠ€æœ¯æ”¹è¿›

### 1. é”™è¯¯å¤„ç†
- âœ… å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- âœ… è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯æ˜¾ç¤º
- âœ… ç½‘ç»œè¿æ¥é”™è¯¯å¤„ç†
- âœ… APIè®¤è¯é”™è¯¯å¤„ç†

### 2. è¾“å‡ºæ ¼å¼åŒ–
- âœ… æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼ï¼ˆtableã€jsonã€yamlã€simpleï¼‰
- âœ… ç¾è§‚çš„è¡¨æ ¼æ˜¾ç¤º
- âœ… ç»“æ„åŒ–çš„JSON/YAMLè¾“å‡º

### 3. é…ç½®ç®¡ç†
- âœ… çµæ´»çš„é…ç½®æ–‡ä»¶æ”¯æŒ
- âœ… è‡ªåŠ¨é…ç½®ç”Ÿæˆ
- âœ… è®¤è¯ä»¤ç‰Œç®¡ç†

### 4. ä»£ç è´¨é‡
- âœ… æ¨¡å—åŒ–è®¾è®¡
- âœ… ä»£ç å¤ç”¨
- âœ… ç±»å‹æ³¨è§£
- âœ… è¯¦ç»†æ³¨é‡Š

## ä½¿ç”¨å»ºè®®

### 1. ç¯å¢ƒè®¾ç½®
```bash
# ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ç¯å¢ƒ
uv run python main.py --help
```

### 2. åŸºæœ¬å·¥ä½œæµç¨‹
```bash
# 1. æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
uv run python main.py system status

# 2. ç”¨æˆ·ç™»å½•
uv run python main.py user login <email> <password>

# 3. åˆ›å»ºæ•°æ®é›†
uv run python main.py datasets create "æˆ‘çš„æ•°æ®é›†"

# 4. ä¸Šä¼ æ–‡æ¡£
uv run python main.py documents upload <dataset_id> --file <file_path>

# 5. æ£€ç´¢æ–‡æ¡£
uv run python main.py retrieval search "æŸ¥è¯¢é—®é¢˜" <dataset_id>
```

### 3. é«˜çº§åŠŸèƒ½
```bash
# å¤šæ•°æ®é›†æ£€ç´¢
uv run python main.py retrieval search "å¤æ‚æŸ¥è¯¢" dataset1 dataset2 --top-k 20

# ç³»ç»Ÿç®¡ç†
uv run python main.py system new-token
uv run python main.py system upload-interface <file_path>

# è°ƒè¯•åŠŸèƒ½
uv run python main.py debug check-connection
```

## æ€»ç»“

RAGForge Shell ç°åœ¨å·²ç»æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæä¾›äº†å¯¹ RAGForge API çš„å…¨é¢è®¿é—®ã€‚æ‰€æœ‰ä¸»è¦åŠŸèƒ½éƒ½å·²å®ç°å¹¶ç»è¿‡æµ‹è¯•éªŒè¯ï¼Œå¯ä»¥æ»¡è¶³ç”¨æˆ·çš„å„ç§éœ€æ±‚ã€‚

### ä¸»è¦ç‰¹ç‚¹
- ğŸ¯ **åŠŸèƒ½å®Œæ•´** - è¦†ç›–æ‰€æœ‰APIç«¯ç‚¹
- ğŸ› ï¸ **æ˜“äºä½¿ç”¨** - ç›´è§‚çš„å‘½ä»¤è¡Œç•Œé¢
- ğŸ“Š **è¾“å‡ºä¸°å¯Œ** - å¤šç§è¾“å‡ºæ ¼å¼æ”¯æŒ
- ğŸ”§ **è°ƒè¯•å‹å¥½** - å®Œå–„çš„è°ƒè¯•å·¥å…·
- ğŸ“š **æ–‡æ¡£é½å…¨** - è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£
- âœ… **æµ‹è¯•éªŒè¯** - è‡ªåŠ¨åŒ–æµ‹è¯•ç¡®ä¿è´¨é‡

è¿™ä¸ªå·¥å…·ç°åœ¨å¯ä»¥ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„ RAGForge API å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¾¿æ·çš„å‘½ä»¤è¡Œè®¿é—®æ–¹å¼ã€‚ 